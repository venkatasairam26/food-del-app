{"ast":null,"code":"import{useState,useEffect}from'react';import Cookies from'js-cookie';import'./index.css';import appUrl from'../../context/storeContext';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const apiStatusContext={initial:\"INITIAL\",success:\"SUCCESS\",inProgress:\"PROGRESS\",failure:\"FAILURE\"};const Profile=()=>{const[apiResponse,setApiResponse]=useState({apiStatus:'INITIAL',data:null,errorMsg:null});useEffect(()=>{getProfileData();},[]);const getProfileData=async()=>{setApiResponse({apiStatus:apiStatusContext.inProgress,data:null,errorMsg:null});const jwtToken=Cookies.get('jwt_token');const apiUrl=appUrl+'/profile';const options={method:'POST',headers:{Authorization:\"Bearer \".concat(jwtToken),'Content-Type':'application/json'}};try{const response=await fetch(apiUrl,options);if(response.ok){const data=await response.json();console.log(data);setApiResponse({apiStatus:apiStatusContext.success,data:data,errorMsg:null});}else{throw new Error('Failed to fetch profile data');}}catch(error){setApiResponse({apiStatus:apiStatusContext.failure,data:null,errorMsg:error.message});}};const renderProfileContent=()=>{const{apiStatus,data,errorMsg}=apiResponse;switch(apiStatus){case apiStatusContext.success:return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-details\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"name: \",data.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",data.email]})]});case apiStatusContext.failure:return/*#__PURE__*/_jsxs(\"p\",{className:\"error-message\",children:[\"Error: \",errorMsg]});case apiStatusContext.inProgress:return/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"Loading...\"});default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile\"}),renderProfileContent()]})});};export default Profile;","map":{"version":3,"names":["useState","useEffect","Cookies","appUrl","jsxs","_jsxs","jsx","_jsx","apiStatusContext","initial","success","inProgress","failure","Profile","apiResponse","setApiResponse","apiStatus","data","errorMsg","getProfileData","jwtToken","get","apiUrl","options","method","headers","Authorization","concat","response","fetch","ok","json","console","log","Error","error","message","renderProfileContent","className","children","username","email"],"sources":["C:/Users/Venkata Sai Ram/OneDrive/Desktop/mern projects/food-del-frontend/src/components/Profile/index.js"],"sourcesContent":["import { useState,useEffect } from 'react';\r\nimport Cookies from 'js-cookie';\r\n\r\nimport './index.css';\r\nimport appUrl from '../../context/storeContext';\r\n\r\nconst apiStatusContext = {\r\n    initial: \"INITIAL\",\r\n    success: \"SUCCESS\",\r\n    inProgress: \"PROGRESS\",\r\n    failure: \"FAILURE\"\r\n}\r\n\r\nconst Profile = () => {\r\n    const [apiResponse, setApiResponse] = useState({\r\n        apiStatus: 'INITIAL',\r\n        data: null,\r\n        errorMsg: null\r\n    });\r\n\r\n    \r\n    \r\n    useEffect(() => {\r\n        getProfileData()}, []);\r\n\r\n    const getProfileData = async () => {\r\n        setApiResponse({\r\n            apiStatus: apiStatusContext.inProgress,\r\n            data: null,\r\n            errorMsg: null\r\n        });\r\n\r\n        const jwtToken = Cookies.get('jwt_token');\r\n        const apiUrl = appUrl + '/profile';\r\n        const options = {\r\n            method: 'POST',\r\n            headers: {\r\n                Authorization: `Bearer ${jwtToken}`,\r\n                'Content-Type': 'application/json'\r\n            }\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(apiUrl, options);\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                console.log(data);\r\n                setApiResponse({\r\n                    apiStatus: apiStatusContext.success,\r\n                    data: data,\r\n                    errorMsg: null\r\n                });\r\n            } else {\r\n                throw new Error('Failed to fetch profile data');\r\n            }\r\n        } catch (error) {\r\n            setApiResponse({\r\n                apiStatus: apiStatusContext.failure,\r\n                data: null,\r\n                errorMsg: error.message\r\n            });\r\n        }\r\n    }\r\n    \r\n    const renderProfileContent = () => {\r\n        const { apiStatus, data, errorMsg } = apiResponse;\r\n\r\n        switch (apiStatus) {\r\n            case apiStatusContext.success:\r\n                return (\r\n                    <div className=\"profile-details\">\r\n                        <h2>name: {data.username}</h2>\r\n                        <p>Email: {data.email}</p>\r\n                        {/* Add more profile details as needed */}\r\n                    </div>\r\n                );\r\n            case apiStatusContext.failure:\r\n                return <p className=\"error-message\">Error: {errorMsg}</p>;\r\n            case apiStatusContext.inProgress:\r\n                return <p className=\"loading-message\">Loading...</p>;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div className=\"profile-container\">\r\n       <div className=\"profile-card\">\r\n         <h1>Profile</h1>\r\n        {renderProfileContent()}\r\n       </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}