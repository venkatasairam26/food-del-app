{"ast":null,"code":"import _objectSpread from\"C:/Users/Venkata Sai Ram/OneDrive/Desktop/mern projects/food-del-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import Cookies from'js-cookie';import'./index.css';import Header from'../header';import Skeleton from'react-loading-skeleton';import'react-loading-skeleton/dist/skeleton.css';// import ExploreMenu from '../exploreMenu'\nimport ProductItem from'../ProductItems';import appUrl from'../../context/storeContext';import{assets}from'../../assets/assets';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const apiStatusContext={initial:\"INITIAL\",success:\"SUCCESS\",inProgress:\"PROGRESS\",failure:\"FAILURE\"};const Home=()=>{const[apiResponse,setApiResponse]=useState({apiStatus:apiStatusContext.initial,data:null,errorMsg:null});const[addCartItem,setCartItem]=useState(false);const[searchInput,setSearchInput]=useState('');const onChangeSearchInput=event=>{setSearchInput(event.target.value);};const onCartItemAdd=async productId=>{setCartItem(true);setTimeout(()=>{setCartItem(false);},3000);};const loaderCount=10;const skeletonArray=Array.from({length:loaderCount},(_,index)=>index+1);const apiResponseData=apiResponse.data||[];const filteredData=apiResponseData.filter(product=>product.name.toLowerCase().includes(searchInput.toLowerCase()));const renderSuccessView=()=>{return filteredData.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-container\",children:[addCartItem&&/*#__PURE__*/_jsx(\"div\",{className:\"cart-item-added\",children:\"Item added to cart\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:filteredData.map(product=>/*#__PURE__*/_jsx(ProductItem,{productDetails:product,onCartItemAdd:onCartItemAdd},product.productId))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"empty-result\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Uh-oh!\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"No result for \".concat(searchInput,\" in Delivery. Please try something else.\")})]});};const renderFailureView=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"error-view\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"error-message\",children:\"Something went wrong. Please try again later.\"})});};const renderLoadingView=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"loading-view\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:skeletonArray.map(item=>/*#__PURE__*/_jsxs(\"li\",{className:\"product-item\",children:[/*#__PURE__*/_jsx(Skeleton,{className:\"skeleton-loader\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-details\",children:/*#__PURE__*/_jsx(Skeleton,{count:2,width:250})})]},item))})});};const renderContent=()=>{const{apiStatus}=apiResponse;switch(apiStatus){case apiStatusContext.success:return renderSuccessView();case apiStatusContext.failure:return renderFailureView();case apiStatusContext.inProgress:return renderLoadingView();default:return null;}};useEffect(()=>{setApiResponse(prevState=>_objectSpread(_objectSpread({},prevState),{},{apiStatus:apiStatusContext.inProgress}));const getProductItems=async()=>{const url=appUrl;const response=await fetch(url,{method:\"GET\",headers:{authorization:\"Bearer \".concat(Cookies.get('jwt_token'))}});const data=await response.json();if(response.ok){setApiResponse({apiStatus:apiStatusContext.success,data:data,errorMsg:null});}else{setApiResponse({apiStatus:apiStatusContext.failure,data:null,errorMsg:data.error});}};getProductItems();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home-page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-text\",children:\"Products\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",className:\"search-input\",onChange:onChangeSearchInput}),/*#__PURE__*/_jsx(\"img\",{src:assets.search_icon,alt:\"search\",className:\"search-icon\"})]})]}),renderContent()]});};export default Home;","map":{"version":3,"names":["useState","useEffect","Cookies","Header","Skeleton","ProductItem","appUrl","assets","jsx","_jsx","jsxs","_jsxs","apiStatusContext","initial","success","inProgress","failure","Home","apiResponse","setApiResponse","apiStatus","data","errorMsg","addCartItem","setCartItem","searchInput","setSearchInput","onChangeSearchInput","event","target","value","onCartItemAdd","productId","setTimeout","loaderCount","skeletonArray","Array","from","length","_","index","apiResponseData","filteredData","filter","product","name","toLowerCase","includes","renderSuccessView","className","children","map","productDetails","concat","renderFailureView","renderLoadingView","item","count","width","renderContent","prevState","_objectSpread","getProductItems","url","response","fetch","method","headers","authorization","get","json","ok","error","type","placeholder","onChange","src","search_icon","alt"],"sources":["C:/Users/Venkata Sai Ram/OneDrive/Desktop/mern projects/food-del-frontend/src/components/Home/index.js"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Cookies from 'js-cookie'\r\nimport './index.css'\r\nimport Header from '../header'\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\n// import ExploreMenu from '../exploreMenu'\r\nimport ProductItem from '../ProductItems'\r\nimport appUrl from '../../context/storeContext'\r\nimport { assets } from '../../assets/assets'\r\n\r\nconst apiStatusContext = {\r\n  initial: \"INITIAL\",\r\n  success: \"SUCCESS\",\r\n  inProgress: \"PROGRESS\",\r\n  failure: \"FAILURE\"\r\n\r\n}\r\nconst Home = () => {\r\n  const [apiResponse, setApiResponse] = useState({\r\n    apiStatus: apiStatusContext.initial, data: null, errorMsg: null\r\n\r\n  })\r\n  const [addCartItem,setCartItem] = useState(false)\r\n  \r\n\r\n  const [searchInput, setSearchInput] = useState('')\r\n  const onChangeSearchInput = (event) => {\r\n    setSearchInput(event.target.value)\r\n  }\r\n  const onCartItemAdd = async (productId) => {\r\n    setCartItem(true)\r\n    setTimeout(() => {\r\n      setCartItem(false)\r\n    }, 3000)\r\n  }\r\n\r\n\r\n  const loaderCount = 10\r\n  const skeletonArray = Array.from({ length: loaderCount }, (_, index) => index + 1)\r\n  const apiResponseData = apiResponse.data || []\r\n  const filteredData = apiResponseData.filter((product) =>\r\n    product.name.toLowerCase().includes(searchInput.toLowerCase())\r\n  )\r\n\r\n  const renderSuccessView = () => {\r\n    return (\r\n        filteredData.length > 0 ? (<div className='product-list-container'>\r\n          {addCartItem && <div className='cart-item-added'>Item added to cart</div>}\r\n          <ul className='product-list'>\r\n          {filteredData.map((product) => <ProductItem key={product.productId} productDetails={product} onCartItemAdd={onCartItemAdd}/>)}\r\n        </ul></div>):(<div className='empty-result'>\r\n          <p><b>Uh-oh!</b></p>\r\n          <p>{`No result for ${searchInput} in Delivery. Please try something else.`}</p>\r\n        </div>)\r\n    )\r\n  }\r\n\r\n  const renderFailureView = () => {\r\n    return (\r\n      <div className='error-view'>\r\n        <h1 className='error-message'>Something went wrong. Please try again later.</h1>\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n\r\n  const renderLoadingView = () => {\r\n    return (\r\n      <div className='loading-view'>\r\n        <ul className='product-list'>\r\n          {skeletonArray.map((item) => (\r\n            <li key={item} className='product-item'>\r\n              <Skeleton className='skeleton-loader' />\r\n              <div className='product-details'>\r\n                <Skeleton count={2}  width={250}/>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const renderContent = () => {\r\n    const { apiStatus } = apiResponse\r\n    switch (apiStatus) {\r\n      case apiStatusContext.success:\r\n        return renderSuccessView()\r\n      case apiStatusContext.failure:\r\n        return renderFailureView()\r\n      case apiStatusContext.inProgress:\r\n        return renderLoadingView()\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setApiResponse(prevState => ({ ...prevState, apiStatus: apiStatusContext.inProgress }))\r\n    const getProductItems = async () => {\r\n      const url = appUrl;\r\n      const response = await fetch(url, {\r\n        method: \"GET\",\r\n        headers: {\r\n          authorization: `Bearer ${Cookies.get('jwt_token')}`,\r\n        }\r\n      })\r\n      const data = await response.json()\r\n      if (response.ok) {\r\n        setApiResponse({\r\n          apiStatus: apiStatusContext.success,\r\n          data: data,\r\n          errorMsg: null\r\n        })\r\n      } else {\r\n        setApiResponse({\r\n          apiStatus: apiStatusContext.failure,\r\n          data: null,\r\n          errorMsg: data.error\r\n        })\r\n      }\r\n    }\r\n    getProductItems()\r\n  }, [])\r\n\r\n\r\n\r\n  return (\r\n    <div className='home-page'>\r\n      <Header />\r\n      <div className='home-header'>\r\n        <h1 className='product-text'>Products</h1>\r\n        <div className='search-bar'>\r\n          <input type='text' placeholder='Search...' className='search-input' onChange={onChangeSearchInput} />\r\n          <img src={assets.search_icon} alt='search' className='search-icon' />\r\n        </div>\r\n      </div>\r\n      {renderContent()}\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}